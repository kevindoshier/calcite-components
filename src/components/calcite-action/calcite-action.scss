:host {
  @extend %component-host; // TODO - jrowlingson
  @extend %component-spacing; // TODO - jrowlingson
  @apply flex bg-transparent;
}

:host([disabled]) {
  @apply pointer-events-none;
}

.button {
  @apply flex
    text-color-3
    fill-color-3
    bg-foreground-1
    m-0
    justify-start
    items-center
    border-0
    cursor-pointer
    relative
    text--2;
  font-family: inherit;
  width: auto; // TODO - jrowlingson - button reset?
  text-align: unset;
  @include focus-style-base(); // TODO - jrowlingson
  &:hover,
  &:focus {
    @apply bg-foreground-2 text-color-1 fill-color-1;
  }

  &:focus {
    @apply bg-foreground-2 text-color-1 fill-color-1;
    @include focus-style-inset(); // TODO - jrowlingson
  }

  &:active {
    @apply bg-foreground-3;
  }

  .icon-container {
    @apply m-0 justify-center items-center flex pointer-events-none;
    min-width: theme("spacing.4");
    min-height: theme("spacing.4");
  }

  .text-container {
    @apply leading-none truncate m-0 opacity-0 w-0;
    color: inherit; // TODO - jrowlingson
    transition: opacity $transition, margin $transition, width $transition; // TODO
  }

  .text-container--visible {
    @apply flex-auto opacity-100;
    width: auto; // TODO - jrowlingson
  }
}

:host([scale="s"]) .button {
  @apply p-2;
}

:host([scale="m"]) .button {
  @apply p-4;
}

:host([scale="l"]) .button {
  @apply p-5
  @include font-size(-1); // TODO
}

// Compact
:host([scale="s"][compact]) .button,
:host([scale="m"][compact]) .button,
:host([scale="l"][compact]) .button {
  @apply px-0;
}

.slot-container {
  @apply flex;
}

.slot-container--hidden {
  @apply hidden;
}

.button--text-visible {
  @apply w-full

  .icon-container {
    @apply m-0 mr-2;
  }
  .text-container--visible {
    @apply m-0 mr-2;
  }
}

.button--text-visible.calcite--rtl {
  .icon-container {
    @apply m-0 ml-2;
  }
  .text-container--visible {
    @apply m-0 ml-2;
  }
}

:host([active]) .button,
:host([active]) .button:hover,
:host([active]) .button:focus,
:host([active][loading]) .button {
  @apply text-color-1 fill-color-1 bg-foreground-3;
}

:host([appearance="clear"]) .button {
  @apply bg-transparent;
  transition: box-shadow $transition;
}

:host([appearance="clear"]) .button:hover,
:host([appearance="clear"]) .button:focus {
  background-color: transparent;
  box-shadow: 0 0 0 2px var(--calcite-ui-border-1) inset;
}

:host([active][appearance="clear"]) .button,
:host([active][appearance="clear"]) .button:hover,
:host([active][appearance="clear"]) .button:focus {
  @apply text-color-1 fill-color-1 bg-foreground-3;
}

:host([appearance="clear"][loading]) .button,
:host([appearance="clear"][disabled]) .button {
  @apply bg-transparent;
}

:host([loading]) .button,
:host([loading]) .button:hover,
:host([loading]) .button:focus {
  @apply bg-foreground-1;
  .text-container {
    @apply opacity-disabled;
  }
}

:host([loading]) calcite-loader[inline] {
  @apply mr-0;
  color: var(--calcite-ui-border-5); // TODO
}

:host([disabled]) .button,
:host([disabled]) .button:hover,
:host([disabled]) .button:focus {
  @apply cursor-default opacity-disabled bg-foreground-1;
}

:host([disabled][active]) .button,
:host([disabled][active]) .button:hover,
:host([disabled][active]) .button:focus {
  @apply opacity-disabled bg-foreground-3;
}

:host([indicator]) .button--text-visible,
:host([indicator][scale="s"]) .button--text-visible,
:host([indicator][scale="l"]) .button--text-visible {
  @apply pr-4;
}

:host([indicator]) .button::after {
  content: "";
  @apply w-2 h-2 absolute z-10;
  border-radius: 50%; // TODO
  border: var(--calcite-spacing-eighth) solid var(--calcite-ui-foreground-1); // TODO - border color?
  background-color: var(--calcite-ui-blue-1); // TODO
  bottom: theme("spacing.2");
  right: theme("spacing.2");
}

:host([indicator][scale="s"]) .button::after {
  bottom: theme("spacing.1");
  right: theme("spacing.1");
}

:host([indicator][scale="l"]) .button::after {
  bottom: theme("spacing.2");
  right: theme("spacing.2");
}

:host([indicator]) .calcite--rtl::after {
  right: unset; // TODO
  left: theme("spacing.1");
}

:host([indicator]) .button--text-visible.calcite--rtl {
  @apply pr-3 pl-4;
}

:host([indicator]) .button:hover::after,
:host([indicator]) .button:focus::after {
  border-color: var(--calcite-ui-foreground-1); // TODO - jrowlingson
}

:host([indicator][active]) .button::after {
  border-color: var(--calcite-ui-foreground-3); // TODO - jrowlingson
}

:host([indicator]) .button--text-visible::after,
:host([indicator][scale="s"]) .button--text-visible::after,
:host([indicator][scale="l"]) .button--text-visible::after {
  bottom: unset;
  right: theme("spacing.2");
}

:host([indicator]) .button--text-visible.calcite--rtl::after, // TODO - jrowlingson - rtl:?
:host([indicator][scale="s"]) .button--text-visible.calcite--rtl::after,
:host([indicator][scale="l"]) .button--text-visible.calcite--rtl::after {
  right: unset;
  left: theme("spacing.2");
}
